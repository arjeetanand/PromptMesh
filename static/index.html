<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PromptMesh - Production Prompt Engineering Platform</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <h1>üîó PromptMesh</h1>
                    <p>Model-Agnostic Prompt Evolution Platform</p>
                </div>
                <div class="header-actions">
                    <button class="btn btn-secondary" id="refreshBtn">
                        <span class="icon">üîÑ</span> Refresh
                    </button>
                    <div class="status-indicator" id="apiStatus">
                        <span class="dot"></span> API Connected
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Navigation -->
    <nav class="main-nav">
        <div class="container">
            <button class="nav-btn active" data-tab="evaluate">
                <span class="icon">üìä</span> Evaluate
            </button>
            <button class="nav-btn" data-tab="compare">
                <span class="icon">‚öñÔ∏è</span> Compare
            </button>
            <button class="nav-btn" data-tab="evolve">
                <span class="icon">üß¨</span> Evolve
            </button>
            <button class="nav-btn" data-tab="testcases">
                <span class="icon">üß™</span> Test Cases
            </button>
            <button class="nav-btn" data-tab="history">
                <span class="icon">üìú</span> History
            </button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            
            <!-- Evaluate Tab -->
            <div class="tab-content active" id="evaluate-tab">
                <div class="panel">
                    <h2>Evaluate Prompt Across Models</h2>
                    <p class="subtitle">Test a prompt version against multiple models with automatic test case generation</p>
                    
                    <form id="evaluateForm" class="form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="evalTask">Task</label>
                                <select id="evalTask" required>
                                    <option value="">Select a task...</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="evalVersion">Version</label>
                                <select id="evalVersion" required>
                                    <option value="">Select version...</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Models to Evaluate</label>
                            <div class="checkbox-group" id="evalModels">
                                <!-- Populated dynamically -->
                            </div>
                        </div>

                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="evalGenerateTests" checked>
                                Auto-generate test cases
                            </label>
                        </div>

                        <div class="form-group" id="manualTestsGroup" style="display: none;">
                            <label for="evalTestInputs">Manual Test Inputs (one per line)</label>
                            <textarea id="evalTestInputs" rows="4" placeholder="Enter test inputs..."></textarea>
                        </div>

                        <div class="form-group">
                            <label for="evalTestCount">Number of Test Cases</label>
                            <input type="number" id="evalTestCount" value="3" min="1" max="10">
                        </div>

                        <button type="submit" class="btn btn-primary btn-large">
                            <span class="icon">üöÄ</span> Start Evaluation
                        </button>
                    </form>

                    <div id="evaluateResults" class="results-section" style="display: none;">
                        <!-- Results populated dynamically -->
                    </div>
                </div>
            </div>

            <!-- Compare Tab -->
            <div class="tab-content" id="compare-tab">
                <div class="panel">
                    <h2>Compare Prompt Versions</h2>
                    <p class="subtitle">Compare multiple versions of a prompt side-by-side</p>
                    
                    <form id="compareForm" class="form">
                        <div class="form-group">
                            <label for="compareTask">Task</label>
                            <select id="compareTask" required>
                                <option value="">Select a task...</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Versions to Compare</label>
                            <div class="checkbox-group" id="compareVersions">
                                <!-- Populated dynamically -->
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Models</label>
                            <div class="checkbox-group" id="compareModels">
                                <!-- Populated dynamically -->
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="compareTestInput">Test Input</label>
                            <textarea id="compareTestInput" rows="4" required placeholder="Enter a test input to compare versions..."></textarea>
                        </div>

                        <button type="submit" class="btn btn-primary btn-large">
                            <span class="icon">‚öñÔ∏è</span> Compare Versions
                        </button>
                    </form>

                    <div id="compareResults" class="results-section" style="display: none;">
                        <!-- Results populated dynamically -->
                    </div>
                </div>
            </div>

            <!-- Evolve Tab -->
            <div class="tab-content" id="evolve-tab">
                <div class="panel">
                    <h2>Evolve Prompt</h2>
                    <p class="subtitle">Iteratively improve a prompt using AI-powered evolution</p>
                    
                    <form id="evolveForm" class="form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="evolveTask">Task</label>
                                <select id="evolveTask" required>
                                    <option value="">Select a task...</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="evolveVersion">Version</label>
                                <select id="evolveVersion" required>
                                    <option value="">Select version...</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-grid">
                            <div class="form-group">
                                <label for="evolveModel">Execution Model</label>
                                <select id="evolveModel" required>
                                    <option value="">Select model...</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="evolveOptimizer">Optimizer Model</label>
                                <select id="evolveOptimizer" required>
                                    <option value="command-a-03-2025">Command-A 03 2025</option>
                                    <option value="qwen2.5:latest">Qwen 2.5</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-grid">
                            <div class="form-group">
                                <label for="evolveIterations">Max Iterations</label>
                                <input type="number" id="evolveIterations" value="3" min="1" max="10">
                            </div>
                            
                            <div class="form-group">
                                <label for="evolveTestCount">Test Cases</label>
                                <input type="number" id="evolveTestCount" value="3" min="1" max="10">
                            </div>
                        </div>

                        <button type="submit" class="btn btn-primary btn-large">
                            <span class="icon">üß¨</span> Start Evolution
                        </button>
                    </form>

                    <div id="evolveResults" class="results-section" style="display: none;">
                        <!-- Results populated dynamically -->
                    </div>
                </div>
            </div>

            <!-- Test Cases Tab -->
            <div class="tab-content" id="testcases-tab">
                <div class="panel">
                    <h2>Generate Test Cases</h2>
                    <p class="subtitle">Create diverse test cases for prompt evaluation</p>
                    
                    <form id="testcasesForm" class="form">
                        <div class="form-group">
                            <label for="testcaseType">Task Type</label>
                            <select id="testcaseType" required>
                                <option value="summarization">Summarization</option>
                                <option value="extraction">Extraction</option>
                                <option value="verification">Verification</option>
                                <option value="classification">Classification</option>
                                <option value="reasoning">Reasoning</option>
                                <option value="generation">Generation</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="testcaseBase">Base Examples (one per line)</label>
                            <textarea id="testcaseBase" rows="4" placeholder="Enter 1-3 example inputs..."></textarea>
                        </div>

                        <div class="form-group">
                            <label for="testcaseCount">Number to Generate</label>
                            <input type="number" id="testcaseCount" value="5" min="1" max="20">
                        </div>

                        <button type="submit" class="btn btn-primary btn-large">
                            <span class="icon">üß™</span> Generate Test Cases
                        </button>
                    </form>

                    <div id="testcasesResults" class="results-section" style="display: none;">
                        <!-- Results populated dynamically -->
                    </div>
                </div>
            </div>

            <!-- History Tab -->
            <div class="tab-content" id="history-tab">
                <div class="panel">
                    <h2>Job History</h2>
                    <p class="subtitle">View past evaluation, comparison, and evolution runs</p>
                    
                    <div id="historyList" class="history-list">
                        <div class="empty-state">
                            <span class="icon">üìã</span>
                            <p>No jobs in history yet</p>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </main>

    <!-- Progress Modal -->
    <div id="progressModal" class="modal">
        <div class="modal-content">
            <h3 id="progressTitle">Processing...</h3>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <p id="progressText">Initializing...</p>
            <button class="btn btn-secondary" id="cancelJobBtn" style="display: none;">Cancel</button>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toastContainer" class="toast-container"></div>

    <script src="app.js"></script>
</body>
</html>